<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>شاي الطلح من أبشر - خريطة التوزيع</title>
    
    <!-- إضافة مكتبة Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- إضافة خطوط جوجل -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- إضافة أيقونات -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #006633;
            --secondary-color: #d4af37;
            --accent-color: #bf0a30;
            --light-color: #f8f9fa;
            --dark-color: #333;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f2ff 100%);
            color: var(--dark-color);
            min-height: 100vh;
        }
        
        #header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #008045 100%);
            color: white;
            padding: 1.2rem;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        #header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' width='100' height='100'%3E%3Cpath fill='%23ffffff' fill-opacity='0.1' d='M0 0h100v100H0z'/%3E%3Cpath fill='%23ffffff' fill-opacity='0.15' d='M0 0h50v50H0z'/%3E%3C/svg%3E");
            background-size: 30px;
        }
        
        #header h1 {
            font-weight: 700;
            font-size: 1.8rem;
            position: relative;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        #header h1::after {
            content: "";
            display: block;
            width: 60px;
            height: 3px;
            background: var(--secondary-color);
            margin: 8px auto 0;
            border-radius: 3px;
        }
        
        #map-container {
            display: flex;
            height: calc(100vh - 80px);
            position: relative;
        }
        
        #map {
            flex: 1;
            height: 100%;
            z-index: 1;
        }
        
        #sidebar {
            width: 320px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            overflow-y: auto;
            box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            z-index: 10;
            border-top-left-radius: 15px;
            border-bottom-left-radius: 15px;
        }
        
        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .sidebar-header h2 {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .toggle-sidebar {
            display: none;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            justify-content: center;
            align-items: center;
        }
        
        #wilaya-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 10px;
        }
        
        #wilaya-list li {
            padding: 12px 10px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: var(--transition);
            border-radius: 8px;
            text-align: center;
            font-size: 0.9rem;
            background: rgba(0, 102, 51, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .wilaya-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        #wilaya-list li:hover {
            background: linear-gradient(135deg, rgba(0, 102, 51, 0.15) 0%, rgba(212, 175, 55, 0.15) 100%);
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }
        
        .marker-popup h3 {
            margin-top: 0;
            color: var(--primary-color);
            text-align: center;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--secondary-color);
            margin-bottom: 10px;
        }
        
        .marker-popup p {
            margin-bottom: 0;
            text-align: center;
            color: #666;
        }
        
        .custom-marker {
            background: var(--primary-color);
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
        
        .custom-marker:hover {
            transform: scale(1.2);
            background: var(--accent-color);
            z-index: 1000;
        }
        
        .map-controls {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .map-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            color: var(--primary-color);
            font-size: 1.2rem;
        }
        
        .map-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 0.5s ease;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(0, 102, 51, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .notification {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            box-shadow: var(--shadow);
            transition: bottom 0.5s ease;
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.show {
            bottom: 20px;
        }
        
        /* تصميم متجاوب */
        @media (max-width: 992px) {
            #map-container {
                flex-direction: column-reverse;
            }
            
            #sidebar {
                width: 100%;
                height: 35vh;
                border-radius: 0;
                padding: 15px;
            }
            
            #map {
                height: 65vh;
            }
            
            .toggle-sidebar {
                display: flex;
                position: absolute;
                top: 10px;
                left: 10px;
                z-index: 1001;
            }
            
            .sidebar-hidden #sidebar {
                transform: translateY(100%);
            }
            
            .sidebar-hidden #map {
                height: 100vh;
            }
        }
        
        @media (max-width: 768px) {
            #wilaya-list {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            }
            
            #wilaya-list li {
                padding: 10px 5px;
                font-size: 0.8rem;
            }
            
            .wilaya-number {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 576px) {
            #header h1 {
                font-size: 1.4rem;
            }
            
            .sidebar-header h2 {
                font-size: 1.1rem;
            }
            
            #wilaya-list {
                grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
                gap: 8px;
            }
            
            #wilaya-list li {
                padding: 8px 4px;
                font-size: 0.75rem;
            }
            
            .wilaya-number {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>شاي الطلح من أبشر متوفر في </h1>
    </div>
    
    <div id="map-container">
        <div class="loading-overlay">
            <div class="spinner"></div>
        </div>
        
        
        
        <div id="map"></div>
        
        <div id="sidebar">
            <div class="sidebar-header">
                <h2>الولايات المحددة</h2>
            </div>
            
            <ul id="wilaya-list"></ul>
        </div>
        
       
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-info-circle"></i>
        <span id="notification-text"></span>
    </div>

    <script>
        // إخفاء شاشة التحميل بعد تحميل الصفحة
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelector('.loading-overlay').style.opacity = '0';
                setTimeout(() => {
                    document.querySelector('.loading-overlay').style.display = 'none';
                }, 500);
            }, 1000);
        });
        
        // إحداثيات مركز الجزائر لتكون نقطة البداية للخريطة
        const algeriaCenter =[33.8000, 2.8833];
        const zoomLevel = 6;
        
        // تهيئة الخريطة
        const map = L.map('map').setView(algeriaCenter, zoomLevel);
        
        // إضافة طبقة الخريطة الأساسية (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // بيانات الولايات الجزائرية المحددة مع أرقامها الرسمية
        const wilayas = [
            { name: "الأغواط", coords: [33.8000, 2.8833], code: "03" },
            { name: "أم البواقي", coords: [35.8784, 7.1135], code: "04" },
            { name: "باتنة", coords: [35.5561, 6.1741], code: "05" },
            { name: "بجاية", coords: [36.7509, 5.0567], code: "06" },
            { name: "بسكرة", coords: [34.8504, 5.7281], code: "07" },
            { name: "البليدة", coords: [36.4700, 2.8277], code: "09" },
            { name: "البويرة", coords: [36.3763, 3.9000], code: "10" },
            { name: "تبسة", coords: [35.4071, 8.1200], code: "12" },
            { name: "تلمسان", coords: [34.8828, -1.3167], code: "13" },
            { name: "تيارت", coords: [35.3700, 1.3200], code: "14" },
            { name: "تيزي وزو", coords: [36.7167, 4.0500], code: "15" },
            { name: "الجزائر", coords: [36.7538, 3.0588], code: "16" },
            { name: "الجلفة", coords: [34.6729, 3.2630], code: "17" },
            { name: "جيجل", coords: [36.8206, 5.7667], code: "18" },
            { name: "سطيف", coords: [36.1914, 5.4137], code: "19" },
            { name: "سعيدة", coords: [34.8410, 0.1514], code: "20" },
            { name: "سكيكدة", coords: [36.8667, 6.9000], code: "21" },
            { name: "سيدي بلعباس", coords: [35.2087, -0.6351], code: "22" },
            { name: "عنابة", coords: [36.9000, 7.7667], code: "23" },
            { name: "قالمة", coords: [36.4667, 7.4333], code: "24" },
            { name: "قسنطينة", coords: [36.3650, 6.6147], code: "25" },
            { name: "المدية", coords: [36.2675, 2.7500], code: "26" },
            { name: "مستغانم", coords: [35.9333, 0.0833], code: "27" },
            { name: "المسيلة", coords: [35.7050, 4.5419], code: "28" },
            { name: "معسكر", coords: [35.4000, 0.1333], code: "29" },
            { name: "وهران", coords: [35.6971, -0.6337], code: "31" },
            { name: "البيض", coords: [33.6833, 1.0167], code: "32" },
            { name: "برج بوعريريج", coords: [36.0667, 4.7667], code: "34" },
            { name: "بومرداس", coords: [36.7667, 3.4833], code: "35" },
            { name: "الطارف", coords: [36.7667, 8.3167], code: "36" },
            { name: "تيسمسيلت", coords: [35.6078, 1.8106], code: "38" },
            { name: "خنشلة", coords: [35.4358, 7.1433], code: "40" },
            { name: "سوق أهراس", coords: [36.2833, 7.9500], code: "41" },
            { name: "تيبازة", coords: [36.5833, 2.4500], code: "42" },
            { name: "ميلة", coords: [36.4503, 6.2644], code: "43" },
            { name: "عين الدفلة", coords: [36.2667, 2.2167], code: "44" },
            { name: "عين تموشنت", coords: [35.3000, -1.1333], code: "46" },
            { name: "غليزان", coords: [35.7333, 0.5500], code: "48" },
            { name: "الشلف", coords: [36.1659, 1.3345], code: "02" }
        ];
        
        // إضافة العلامات المخصصة إلى الخريطة
        const markers = [];
        
        wilayas.forEach(wilaya => {
            // إنشاء أيقونة مخصصة مع رقم الولاية
            const customIcon = L.divIcon({
                html: `<div style="background-color: #006633; color: white; border: 2px solid white; border-radius: 50%; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">${wilaya.code}</div>`,
                className: 'custom-marker',
                iconSize: [30, 30],
                iconAnchor: [15, 15]
            });
            
            const marker = L.marker(wilaya.coords, { icon: customIcon });
            
            marker.bindPopup(`
                <div class="marker-popup">
                    <h3>${wilaya.name}</h3>
                    <p>الرقم: ${wilaya.code}</p>
                    <p>إحداثيات: ${wilaya.coords[0].toFixed(4)}, ${wilaya.coords[1].toFixed(4)}</p>
                </div>
            `);
            
            marker.on('mouseover', function(e) {
                this.openPopup();
                const icon = this.getElement();
                if (icon) {
                    icon.style.transform = 'scale(1.3)';
                    icon.style.zIndex = '1000';
                }
            });
            
            marker.on('mouseout', function(e) {
                const icon = this.getElement();
                if (icon) {
                    icon.style.transform = 'scale(1)';
                    icon.style.zIndex = '';
                }
            });
            
            markers.push({
                name: wilaya.name,
                marker: marker
            });
            
            marker.addTo(map);
        });
        
        // إنشاء القائمة الجانبية
        const wilayaList = document.getElementById('wilaya-list');
        
        wilayas.forEach(wilaya => {
            const li = document.createElement('li');
            
            const numberSpan = document.createElement('span');
            numberSpan.className = 'wilaya-number';
            numberSpan.textContent = wilaya.code;
            
            const nameSpan = document.createElement('span');
            nameSpan.textContent = wilaya.name;
            
            li.appendChild(numberSpan);
            li.appendChild(nameSpan);
            
            li.addEventListener('click', () => {
                map.setView(wilaya.coords, 8);
                const foundMarker = markers.find(m => m.name === wilaya.name);
                if (foundMarker) {
                    foundMarker.marker.openPopup();
                    showNotification(`تم التمرير إلى ولاية ${wilaya.name}`);
                }
            });
            wilayaList.appendChild(li);
        });
        
        // وظائف أزرار التحكم
        document.getElementById('zoom-in').addEventListener('click', () => {
            map.zoomIn();
            showNotification("تم تكبير الخريطة");
        });
        
        document.getElementById('zoom-out').addEventListener('click', () => {
            map.zoomOut();
            showNotification("تم تصغير الخريطة");
        });
        
        document.getElementById('reset-view').addEventListener('click', () => {
            map.setView(algeriaCenter, zoomLevel);
            showNotification("العودة إلى العرض الافتراضي");
        });
        
        document.getElementById('locate-me').addEventListener('click', () => {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const { latitude, longitude } = position.coords;
                        map.setView([latitude, longitude], 10);
                        L.marker([latitude, longitude])
                            .addTo(map)
                            .bindPopup('موقعك الحالي')
                            .openPopup();
                        showNotification("تم تحديد موقعك على الخريطة");
                    },
                    (error) => {
                        showNotification("تعذر الحصول على موقعك: " + error.message);
                    }
                );
            } else {
                showNotification("المتصفح لا يدعم خدمة تحديد الموقع");
            }
        });
        
        // تبديل الشريط الجانبي على الأجهزة المحمولة
        const toggleSidebar = document.querySelector('.toggle-sidebar');
        const mapContainer = document.querySelector('#map-container');
        
        toggleSidebar.addEventListener('click', () => {
            mapContainer.classList.toggle('sidebar-hidden');
        });
        
        // وظيفة إظهار الإشعارات
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // تأثيرات عند تحميل الصفحة
        setTimeout(() => {
            showNotification("مرحباً بك في خريطة توزيع شاي الطلح من أبشر!");
        }, 1500);
    </script>
</body>
</html>